<app-navbar></app-navbar>

<div class="container" id="jobCards" style="padding-bottom: 5%;">
    <div class="row d-flex justify-content-center">
        <div class="col-sm-8">
        <div *ngIf="true" class="col-sm-2">
            <button (click)="goToCreateJob()" class="btn btn-primary"><i class="fas fa-plus"></i> Create Job</button>
        </div>
        <div class="text-center">
            <h1 style="font-weight:bold; font-size: 30px;">Jobs</h1>
        </div>
        <div *ngIf="jobs.length==0" class="text-center p-4 text-muted">
            No jobs have been posted
        </div>
        <div *ngFor="let job of jobs">
            <div *ngIf="usersJob(job) && sortType==0">
                <div class="card border-primary mb-4" id="jobCard">
                    <div class="card-title m-1 ">
                        <h2 style="margin-left: 5%;padding-top:5% ;">{{job.title}}</h2>
                        <hr style="width: 90%;margin-left: 5%;margin-right: 5%;">
                    </div>
                    <div class="card-body" style="margin-left: 5%;padding-bottom: 10px;">
                        <div style="padding-bottom: 20px;">
                            {{job.description}}
                        </div>
                        <div style="padding-bottom: 20px;">
                            Number of applicants so far: {{job.usersApplied.length}}
                        </div>
                        <div style="padding-bottom: 5px;">
                            Applicants:
                        </div>
                        <u id="applicants" style="text-decoration:none">
                            <li *ngFor="let u of job.usersApplied" style="text-decoration:none">
                                <span class="align-middle applicant" [routerLink]="['/users/', u.id]"
                                    style="text-decoration:none">{{u.name}} {{u.surname}} </span>
                            </li>
                        </u>


                    </div>
                    <hr style="width: 90%;margin-left: 5%;margin-right: 5%;">
                    <div class="card-body" style="margin-left: 2%;padding-bottom: 10px;">


                        <div style="padding-bottom: 20px;float:right;margin-right: 1%;">
                            Published by You
                        </div>
                        <div style="padding-bottom: 20px;float:left;margin-right: 1%;">
                            {{job.timestamp | date:'d MMMM y, h:mm a'}}
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="!usersJob(job)">
                <div class="card border mb-4" id="jobCard">
                    <div class="card-title m-1 ">
                        <h2 style="float:left;margin-left: 5%;padding-top:5% ;">{{job.title}}</h2>
                        <div *ngIf="!alreadyApplied(job)" style="float:right;padding-top:5% ;" class="col-2  ">
                            <button type="button" (click)="newApplication(job.id)" class="btn btn-primary"> <i
                                    class="fas fa-plus"></i> Apply</button>
                        </div>
                        <div *ngIf="alreadyApplied(job)" style="float:right;padding-top:5% ;" class="col-3  ">
                            <button disabled type="button" class="btn btn-outline-success"> <i class="fas fa-check"></i>
                                Already applied</button>
                        </div>
                        <hr style="width: 90%;margin-left: 5%;margin-right: 5%;">

                    </div>

                    <div class="card-body" style="margin-left: 5%;padding-bottom: 10px;">
                        <div style="padding-bottom: 20px;">
                            {{job.description}}
                        </div>

                        <div style="padding-bottom: 20px;">
                            Applicants so far: {{job.usersApplied.length}}
                        </div>

                        <div style="padding-bottom: 20px;float:right;margin-right: 1%;">
                            Published by <a [routerLink]="['/users/',job.userMadeBy.id]"
                                style="text-decoration: none;"><b>{{job.userMadeBy.name}}
                                    {{job.userMadeBy.surname}}</b></a>

                        </div>
                        <div style="padding-bottom: 20px;float:left;margin-right: 1%;">
                            {{job.timestamp | date:'d MMMM y, h:mm a'}}
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>